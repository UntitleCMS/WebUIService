<div
  class="hidden lg:flex shrink-0 sticky top-0 h-screen bg-white flex-col justify-between gap-4 py-4 border-e transition-all duration-300"
  [ngClass]="[isExpanded ? 'w-72 px-4' : 'w-16 px-2']"
>
  <div class="flex flex-col gap-2">
    <ng-container *ngFor="let item of menu">
      <NavButton
        *ngIf="item.requireLoggedIn ? isLoggedIn() : true"
        [to]="item.to"
        [icon]="item.icon"
        [label]="item.label"
        [exact]="item.exact"
        [isExpanded]="isExpanded"
      />
    </ng-container>
    <hr />
    <button
      *ngIf="!isLoggedIn(); else logoutRef"
      (click)="login()"
      class="flex gap-4 items-center w-full py-2 rounded-xl hover:bg-sky-50 hover:text-sky-950 overflow-hidden whitespace-nowrap transition-all duration-300"
      [ngClass]="[isExpanded ? 'px-4' : 'px-2']"
    >
      <span class="msr">login</span>เข้าสู่ระบบ
    </button>
  </div>
  <button
    (click)="toggleExpand()"
    class="p-2 bg-zinc-200 self-start rounded-xl flex items-center text-white transition-all"
    [ngClass]="[isExpanded ? 'ms-2' : '']"
  >
    <span class="msr transition-all" [ngClass]="{ 'rotate-180': isExpanded }"
      >arrow_forward_ios</span
    >
  </button>
  <div
    *ngIf="isLoggedIn()"
    class="py-2 transition-all duration-300"
    [ngClass]="[isExpanded ? 'px-4' : 'px-2']"
  >
    <UserHeader
      [avatarOnly]="!isExpanded"
      [linkable]="false"
      fontSize="medium"
      [userId]="userService.currentUser()?.userId!"
      [name]="userService.currentUser()?.displayName!"
    />
  </div>
</div>

<ng-template #logoutRef>
  <button
    (click)="logout()"
    class="flex gap-4 items-center w-full py-2 rounded-xl hover:bg-sky-50 hover:text-sky-950 overflow-hidden whitespace-nowrap transition-all duration-300"
    [ngClass]="[isExpanded ? 'px-4' : 'px-2']"
  >
    <span class="msr">logout</span>ออกจากระบบ
  </button>
</ng-template>
